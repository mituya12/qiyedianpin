---
name: /admin-docs
id: admin-docs-generator
category: 文档生成
description: 后台管理系统文档生成器 - 生成开发规划、数据表设计、API设计文档
---

# 后台管理系统文档生成器

## 指令说明

基于现有项目的**用户端（C端）功能**，反推并生成后台管理系统所需的三个规划文档：
1. 后台管理系统开发规划.md - 根据C端功能规划后台管理模块
2. 数据表设计.md - MySQL 5.7+ 建表语句
3. API设计.md - 现有接口 + 新规划的后台管理接口

**核心思路**：从C端业务反推B端管理需求

## 执行步骤

### 1. 分析C端（用户端）业务功能

#### 1.1 扫描C端页面和功能

```bash
# 查找所有前端页面
find . -type f \( -name "*.vue" -o -name "*.jsx" -o -name "*.tsx" \) -path "*/pages/*" -o -path "*/views/*" 2>/dev/null

# 查找路由配置
find . -type f \( -name "*router*" -o -name "*route*" \) 2>/dev/null | grep -E "\.(js|ts)$"

# 查找API接口定义
find . -type f \( -name "*api*" -o -name "*request*" -o -name "*service*" \) 2>/dev/null
```

**识别C端业务模块**（逐个读取页面代码）：
- 用户相关：登录、注册、个人中心、实名认证等 → 对应后台"用户管理"
- 订单相关：下单、订单列表、订单详情等 → 对应后台"订单管理"
- 商品相关：商品列表、商品详情、购物车等 → 对应后台"商品管理"
- 内容相关：文章、评论、收藏等 → 对应后台"内容管理"
- 其他业务功能 → 对应后台管理模块

#### 1.2 扫描现有数据模型

```bash
# 查找数据模型
find . -type f \( -name "*model*" -o -name "*Model*" -o -name "*entity*" -o -name "*Entity*" -o -name "*schema*" \) 2>/dev/null

# 查找数据库配置
find . -type f \( -name "*database*" -o -name "*db*" -o -name "*.sql" \) 2>/dev/null
```

**对每个数据表，完整读取代码**：
- 表名和字段定义
- 字段类型、长度、约束
- 索引定义
- 表关系（外键、关联）

#### 1.3 扫描现有API接口

```bash
# 查找后端接口
find . -type f \( -name "*controller*" -o -name "*Controller*" -o -name "*route*" \) 2>/dev/null
```

**记录现有接口**：
- C端接口（用户使用的）
- B端接口（如果已有后台管理）
- 接口路径、参数、响应格式

### 2. 从C端功能反推后台管理需求

**反推规则**：

1. **用户功能** → 后台"用户管理"模块
   - C端：登录、注册、个人信息 
   - B端：用户列表、用户详情、用户状态管理、实名审核等

2. **订单功能** → 后台"订单管理"模块
   - C端：下单、订单列表、订单详情
   - B端：订单列表、订单详情、订单状态修改、退款处理等

3. **商品功能** → 后台"商品管理"模块
   - C端：商品列表、商品详情、加购物车
   - B端：商品列表、新增商品、编辑商品、上下架等

4. **内容功能** → 后台"内容管理"模块
   - C端：文章列表、文章详情、评论
   - B端：文章管理、评论审核等

5. **其他业务** → 根据实际分析

### 3. 确定后台管理模块结构

根据C端功能，确定后台需要的管理模块（一级菜单和二级菜单）。

**对于每个后台管理页面，设计**：
- 搜索字段（根据业务需求和数据表字段）
- 列表字段（核心字段展示）
- 列表操作（查看、编辑、删除、状态切换等）
- 新增/编辑表单（必填字段、选填字段、验证规则）

### 4. 文档生成规范

#### 后台管理系统开发规划.md

**生成规则**：根据C端业务功能，反推B端管理模块

**严格按照以下格式输出**：

```
# 后台管理系统开发规划

## 项目概述
[从实际项目中提取]

## 需要开发的模块清单

### 一级菜单：用户管理
#### 二级菜单：普通用户

**搜索字段**：
- 用户名（输入框）
- 手机号（输入框）
- 状态（下拉选择：全部/正常/禁用）
- 注册时间（日期范围）

**列表字段**：
- 用户ID
- 用户名
- 手机号
- 状态
- 注册时间
- 最后登录时间

**列表操作**：
- 查看详情
- 编辑
- 禁用/启用
- 删除

**新增/编辑表单字段**：
- 用户名（必填、文本输入、2-20字符）
- 手机号（必填、文本输入、11位数字）
- 邮箱（选填、邮箱格式）
- 状态（必填、下拉选择：正常/禁用）
- 备注（选填、文本域、最多200字符）

---

### 一级菜单：订单管理
#### 二级菜单：订单列表

**搜索字段**：
- 订单号（输入框）
- 用户手机号（输入框）
- 订单状态（下拉选择）
- 下单时间（日期范围）

**列表字段**：
- 订单号
- 用户信息
- 订单金额
- 订单状态
- 下单时间

**列表操作**：
- 查看详情
- 修改状态
- 退款

**新增/编辑表单字段**：
[根据实际业务需求]

---

[其他模块按此格式继续...]
```

**重要**：
- 根据C端实际功能反推，有登录就有用户管理，有订单就有订单管理
- 字段要具体明确，不要使用xxx这种占位符
- 每个模块的字段必须对应数据表中的实际字段

#### 数据表设计.md

**生成规则**：基于实际Model代码，生成MySQL 5.7+建表语句

**严格按照以下格式输出**：

```
# 数据表设计

## 数据库版本
MySQL 5.7+

## 表设计

### 1. 用户表（users）

**表说明**：存储用户基本信息

**建表语句**：
\`\`\`sql
CREATE TABLE \`users\` (
  \`id\` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '用户ID',
  \`username\` varchar(50) NOT NULL DEFAULT '' COMMENT '用户名',
  \`mobile\` varchar(11) NOT NULL DEFAULT '' COMMENT '手机号',
  \`password\` varchar(255) NOT NULL DEFAULT '' COMMENT '密码',
  \`status\` tinyint(1) NOT NULL DEFAULT '1' COMMENT '状态：1正常 0禁用',
  \`created_at\` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  \`updated_at\` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (\`id\`),
  UNIQUE KEY \`uk_mobile\` (\`mobile\`),
  KEY \`idx_status\` (\`status\`),
  KEY \`idx_created_at\` (\`created_at\`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';
\`\`\`

**字段说明**：
| 字段名 | 类型 | 长度 | 说明 | 约束 | 是否必填 | 默认值 | 备注 |
|--------|------|------|------|------|----------|--------|------|
| id | int | 11 | 用户ID | PRIMARY KEY, AUTO_INCREMENT | 是 | - | 主键 |
| username | varchar | 50 | 用户名 | - | 是 | '' | - |
| mobile | varchar | 11 | 手机号 | UNIQUE | 是 | '' | 唯一 |
| password | varchar | 255 | 密码 | - | 是 | '' | 加密存储 |
| status | tinyint | 1 | 状态 | - | 是 | 1 | 1正常 0禁用 |
| created_at | datetime | - | 创建时间 | - | 是 | CURRENT_TIMESTAMP | - |
| updated_at | datetime | - | 更新时间 | ON UPDATE | 是 | CURRENT_TIMESTAMP | 自动更新 |

**索引说明**：
| 索引名 | 索引类型 | 索引字段 | 说明 |
|--------|----------|----------|------|
| PRIMARY | 主键 | id | 主键索引 |
| uk_mobile | 唯一索引 | mobile | 手机号唯一 |
| idx_status | 普通索引 | status | 状态查询优化 |
| idx_created_at | 普通索引 | created_at | 时间查询优化 |

---

### 2. 订单表（orders）

[按相同格式继续...]

---

## 表关系说明

- users 表与 orders 表：一对多关系，通过 orders.user_id 关联
- [其他表关系...]
```

**重要**：
- 必须生成完整的MySQL 5.7+建表语句
- 字段类型、长度必须明确（不能用xxx）
- 必须包含索引定义
- 从实际Model代码中提取，如果没有某个字段就不要加

#### API设计.md

**生成规则**：现有接口（从实际代码提取） + 新规划的后台管理接口（根据开发规划生成）

**严格按照以下格式输出**：

```
# API接口设计

## 接口规范

**接口前缀**：
- C端（用户端）：`/api/c/` 或 [从实际代码识别的前缀]
- B端（管理端）：`/api/b/` 或 `/api/admin/` [从实际代码识别或新规划]

**响应格式**：
\`\`\`json
{
  "code": 0,
  "message": "success",
  "data": {}
}
\`\`\`

**分页格式**：
\`\`\`json
{
  "code": 0,
  "data": {
    "list": [],
    "total": 100,
    "page": 1,
    "pageSize": 20
  }
}
\`\`\`

**状态码**：
| code | 说明 |
|------|------|
| 0 | 成功 |
| 400 | 参数错误 |
| 401 | 未登录 |
| 403 | 无权限 |
| 500 | 服务器错误 |

---

## 一、C端接口（现有接口，从实际代码提取）

### 1. 用户模块

#### 1.1 用户登录
- **请求方式**：POST
- **请求路径**：`/api/c/user/login`
- **请求参数**：
  | 参数名 | 类型 | 是否必填 | 说明 | 示例 |
  |--------|------|----------|------|------|
  | mobile | string | 是 | 手机号 | "13800138000" |
  | password | string | 是 | 密码 | "123456" |

- **响应数据**：
  \`\`\`json
  {
    "code": 0,
    "data": {
      "token": "xxx",
      "userInfo": {
        "id": 1,
        "username": "张三",
        "mobile": "13800138000"
      }
    }
  }
  \`\`\`

[继续列出其他C端接口...]

---

## 二、B端接口（后台管理接口）

### 1. 用户管理

#### 1.1 获取用户列表
- **请求方式**：GET
- **请求路径**：`/api/admin/user/list`
- **请求参数**：
  | 参数名 | 类型 | 是否必填 | 说明 | 示例 |
  |--------|------|----------|------|------|
  | page | number | 否 | 页码 | 1 |
  | pageSize | number | 否 | 每页数量 | 20 |
  | keyword | string | 否 | 关键词（用户名/手机号） | "张三" |
  | status | number | 否 | 状态：1正常 0禁用 | 1 |
  | startTime | string | 否 | 开始时间 | "2024-01-01" |
  | endTime | string | 否 | 结束时间 | "2024-12-31" |

- **响应数据**：
  \`\`\`json
  {
    "code": 0,
    "data": {
      "list": [
        {
          "id": 1,
          "username": "张三",
          "mobile": "13800138000",
          "status": 1,
          "created_at": "2024-01-01 12:00:00",
          "last_login_at": "2024-01-10 18:00:00"
        }
      ],
      "total": 100,
      "page": 1,
      "pageSize": 20
    }
  }
  \`\`\`

#### 1.2 获取用户详情
- **请求方式**：GET
- **请求路径**：`/api/admin/user/:id`
- **请求参数**：
  | 参数名 | 类型 | 是否必填 | 说明 | 示例 |
  |--------|------|----------|------|------|
  | id | number | 是 | 用户ID（路径参数） | 1 |

- **响应数据**：
  \`\`\`json
  {
    "code": 0,
    "data": {
      "id": 1,
      "username": "张三",
      "mobile": "13800138000",
      "email": "zhangsan@example.com",
      "status": 1,
      "created_at": "2024-01-01 12:00:00",
      "remark": "备注信息"
    }
  }
  \`\`\`

#### 1.3 新增用户
- **请求方式**：POST
- **请求路径**：`/api/admin/user`
- **请求参数**：
  | 参数名 | 类型 | 是否必填 | 说明 | 示例 |
  |--------|------|----------|------|------|
  | username | string | 是 | 用户名 | "张三" |
  | mobile | string | 是 | 手机号 | "13800138000" |
  | password | string | 是 | 密码 | "123456" |
  | email | string | 否 | 邮箱 | "zhangsan@example.com" |
  | status | number | 是 | 状态 | 1 |
  | remark | string | 否 | 备注 | "测试用户" |

- **响应数据**：
  \`\`\`json
  {
    "code": 0,
    "data": {
      "id": 1
    },
    "message": "新增成功"
  }
  \`\`\`

#### 1.4 编辑用户
- **请求方式**：PUT
- **请求路径**：`/api/admin/user/:id`
- **请求参数**：[同新增接口]

#### 1.5 删除用户
- **请求方式**：DELETE
- **请求路径**：`/api/admin/user/:id`

#### 1.6 修改用户状态
- **请求方式**：PUT
- **请求路径**：`/api/admin/user/:id/status`
- **请求参数**：
  | 参数名 | 类型 | 是否必填 | 说明 | 示例 |
  |--------|------|----------|------|------|
  | status | number | 是 | 状态：1正常 0禁用 | 1 |

---

### 2. 订单管理

[按相同格式继续生成订单管理的所有接口...]

---
```

**重要**：
- C端接口：从实际代码中提取
- B端接口：根据"后台管理系统开发规划"生成完整的CRUD接口
- 每个管理模块至少包含：列表、详情、新增、编辑、删除接口
- 接口参数要对应数据表字段
- 响应数据要包含实际需要的所有字段

### 5. 数据一致性检查

在生成文档前，必须确保：

1. **开发规划 ↔ 数据表 ↔ API接口 三者一致**
   - 开发规划中的字段 = 数据表中的字段
   - 开发规划中的字段 = API接口的参数/响应字段
   - 搜索字段对应查询接口的参数
   - 列表字段对应列表接口的响应
   - 表单字段对应新增/编辑接口的参数

2. **从C端反推B端的完整性**
   - C端有登录功能 → B端必须有用户管理
   - C端有订单功能 → B端必须有订单管理
   - C端有商品功能 → B端必须有商品管理
   - 每个B端模块都要有完整的CRUD接口

3. **MySQL建表语句的准确性**
   - 必须是可直接执行的SQL语句
   - 字段类型、长度、默认值必须明确
   - 必须包含PRIMARY KEY和必要的索引
   - 必须符合MySQL 5.7+语法

4. **不添加不存在的功能**
   - 如果C端没有某个功能，B端就不要生成对应的管理模块
   - 如果数据表没有某个字段，就不要在开发规划和API中出现

### 6. 执行规范

**核心原则**：
1. **从C端反推B端** - 根据用户端功能确定后台管理模块
2. **完整CRUD** - 每个模块都要有完整的增删改查功能
3. **MySQL 5.7+** - 数据表设计必须生成可执行的建表语句
4. **三者一致** - 开发规划、数据表、API接口字段必须一致
5. **直接创建文件** - 不输出markdown内容，直接写入文件
6. **禁止emoji** - 不使用任何emoji图标

**执行流程**：

1. **分析项目**（内部完成，不输出）
   - 扫描C端功能
   - 反推B端模块
   - 扫描数据模型
   - 扫描现有接口

2. **生成文档内容**（内部完成，不输出）
   - 按第4章节格式生成"后台管理系统开发规划.md"
   - 按第4章节格式生成"数据表设计.md"（包含MySQL建表语句）
   - 按第4章节格式生成"API设计.md"（C端+B端接口）

3. **立即创建文件**（直接执行）
   ```bash
   mkdir -p docs
   ```
   
   然后立即使用 write 工具写入三个文件：
   - write('docs/后台管理系统开发规划.md', [完整内容])
   - write('docs/数据表设计.md', [完整内容])
   - write('docs/API设计.md', [完整内容])

4. **告知用户**
   输出简洁的成功消息：
   ```
   ✓ 已生成三个文档到 docs/ 目录：
   - 后台管理系统开发规划.md
   - 数据表设计.md
   - API设计.md
   
   基于分析结果：
   - 识别到 X 个C端业务模块
   - 反推出 Y 个B端管理模块
   - 生成 Z 个数据表
   - 规划 N 个API接口
   ```

**重要禁止**：
- ❌ 禁止输出三个文档的markdown内容
- ❌ 禁止展示文档详情给用户
- ❌ 禁止等待用户确认
- ❌ 禁止询问"是否需要我写入文件"
- ✅ 直接分析、直接生成、直接写入、告知完成

## 使用示例

直接在AI助手中输入：
```
/admin-docs
```

AI会：
1. **扫描C端代码**：分析用户端的功能（登录、订单、商品等）
2. **反推B端模块**：根据C端功能确定后台需要哪些管理模块
3. **扫描数据表**：读取Model代码，提取字段定义
4. **生成三个文档**：
   - 后台管理系统开发规划（按示例格式：一级菜单→二级菜单→字段详情）
   - 数据表设计（MySQL 5.7+建表语句）
   - API设计（现有C端接口 + 新规划的B端接口）
5. **立即写入docs目录**（不等待确认）

## 核心逻辑

**从C端反推B端**：
- C端有登录、注册、个人中心 → B端生成"用户管理 - 普通用户"
- C端有下单、订单列表 → B端生成"订单管理 - 订单列表"
- C端有商品浏览、购物车 → B端生成"商品管理 - 商品列表"

**三个文档一致性**：
- 开发规划中的"搜索字段" = API中的"查询参数" = 数据表字段
- 开发规划中的"列表字段" = API中的"响应字段" = 数据表字段
- 开发规划中的"表单字段" = API中的"提交参数" = 数据表字段

## 注意事项

- **从C端反推B端**，有什么C端功能就生成对应的B端管理模块
- **MySQL 5.7+**，必须生成可直接执行的建表语句
- **API包含两部分**：现有C端接口（从代码提取） + 新规划B端接口（根据开发规划生成）
- **字段具体明确**，不使用xxx占位符
- **完整CRUD接口**，每个模块至少包含：列表、详情、新增、编辑、删除、状态修改
- **不考虑权限、字典**，除非代码中已存在

